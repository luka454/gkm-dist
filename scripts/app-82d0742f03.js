!function(){"use strict";angular.module("gkm.repertoar",["ui.router","gkm.markdown"])}(),function(){"use strict";function e(){var e={replace:!0,restrict:"E",templateUrl:"app/components/repertoar/small-show.tmpl.html",scope:{show:"="},controller:["$scope","$state",t]};return e}function t(e,t){e.go=function(){t.go("show",{id:e.show.id})}}angular.module("gkm.repertoar").directive("smallShow",e)}(),function(){"use strict";function e(e){e.state("show",{url:"/predstava/:id",templateUrl:"app/components/repertoar/show.tmpl.html",controller:"ShowCtrl"})}angular.module("gkm.repertoar").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,r,o){e.show={},r.getById(t.id).then(function(t){angular.copy(t,e.show);var r=markdown.toHTML(t.description);document.getElementById("holder").innerHTML=r},function(e){o.error(e)})}angular.module("gkm.repertoar").controller("ShowCtrl",e),e.$inject=["$scope","$stateParams","repertoarService","$log"]}(),function(){"use strict";function e(){var e={restrict:"C",templateUrl:"app/components/repertoar/rp-calendar.tmpl.html",scope:{date:"=datetime"},controller:["$scope","$filter",t]};return e}function t(e,t){var r;if(e.date instanceof Date)r=e.date;else{if("string"!=typeof e.date)throw Error("$scope date should be instace of Date or string which represent date");r=new Date(e.date)}var o=t("date");e.day=o(r,"dd"),e.mon=o(r,"MMM"),e.time=o(r,"HH:mm")+"h"}angular.module("gkm.repertoar").directive("rpCalendar",e)}(),function(){"use strict";function e(e,t){var r="assets/repertoar.json";return{all:function(){var o=t.defer();return e.get(r).then(function(e){o.resolve(e.data.shows)},function(e){o.reject(e)}),o.promise},getById:function(o){"string"==typeof o&&(o=parseInt(o));var a=t.defer();return e.get(r).then(function(e){var t=e.data.shows;for(var r in t)t[r].id===o&&a.resolve(t[r]);a.reject({error:"No show with that ID."})},function(e){a.reject(e)}),a.promise},nextShow:function(){var o=t.defer();return e.get(r).then(function(e){o.resolve(e.data.shows[0])},function(e){o.reject(e)}),o.promise}}}angular.module("gkm.repertoar").service("repertoarService",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(e){e.state("repertoar",{url:"/repertoar",templateUrl:"app/components/repertoar/repertoar.tmpl.html",controller:"RepertoarCtrl"})}angular.module("gkm.repertoar").config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,r){e.shows=[],t.all().then(function(t){angular.copy(t,e.shows)},function(e){r.error(e)})}angular.module("gkm.repertoar").controller("RepertoarCtrl",e),e.$inject=["$scope","repertoarService","$log"]}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"app/components/repertoar/repertoar-list-item.tmpl.html",scope:{show:"=repertoarShow"},controller:["$scope","$state",t]};return e}function t(e,t){e.go=function(e){t.go("show",{id:e})}}angular.module("gkm.repertoar").directive("repertoarLi",e)}(),function(){"use strict";angular.module("gkm",["ui.router","ui.bootstrap","gkm.repertoar"])}(),function(){"use strict";function e(){function e(e,t){e.links=[{title:"Home",state:"home"},{title:"Repertoar",state:"repertoar"}];var r=this;r.relativeDate=t(r.creationDate).fromNow()}var t={replace:!0,restrict:"E",templateUrl:"app/components/navbar/navbar.tmpl.html",scope:{},controller:e,controllerAs:"vm",bindToController:!0};return e.$inject=["$scope","moment"],t}angular.module("gkm").directive("spNavbar",e)}(),function(){"use strict";!function(){markdown}(),angular.module("gkm.markdown",[]).constant("markdown_vendor",markdown)}(),function(){"use strict";function e(e){return function(t){return t?e.toHTML(t):t}}angular.module("gkm.markdown").filter("markdown",e),e.$inject=["markdown_vendor"]}(),function(){"use strict";function e(e,t){e.nextShow={notLoad:!0},t.nextShow().then(function(t){angular.copy(t,e.nextShow)})}angular.module("gkm").controller("HomeCtrl",e),e.$inject=["$scope","repertoarService"]}(),function(){"use strict";function e(e){e.debug("runBlock end")}angular.module("gkm").run(e),e.$inject=["$log"]}(),function(){"use strict";function e(e,t){e.state("home",{url:"/",templateUrl:"app/components/home/home.tmpl.html",controller:"HomeCtrl"}),t.otherwise("/")}angular.module("gkm").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";angular.module("gkm").constant("toastr",toastr).constant("moment",moment)}(),function(){"use strict";function e(e,t){e.debugEnabled(!0),t.options.timeOut=3e3,t.options.positionClass="toast-top-right",t.options.preventDuplicates=!0,t.options.progressBar=!0}angular.module("gkm").config(e),e.$inject=["$logProvider","toastr"]}(),angular.module("gkm").run(["$templateCache",function(e){e.put("app/components/navbar/navbar.tmpl.html",'<nav class="navbar navbar-inverse navbar-static-top"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle" ng-click="navCollapsed = !navCollapsed"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" ui-sref="home">Dani kazališta — 2015.</a></div><div class="collapse navbar-collapse" collapse="navCollapsed"><ul class="nav navbar-nav"><li ui-sref-active="active" ng-repeat="item in ::links"><a ui-sref="{{::item.state}}">{{::item.title}}</a></li></ul></div></div></nav>'),e.put("app/components/home/home.tmpl.html",'<div class="row"><div class="col-md-6"></div><div class="col-md-6"><div ng-if="!nextShow.notLoad"><h2><span class="gkm-page-header">Sljedeća predstava</span></h2><small-show show="nextShow" class="hvr-grow"></small-show><hr></div><a ui-sref="repertoar" class="underline-clear"><div class="home-repertoar hvr-grow"><div class="small"><span class="dark-background">Pogledaj</span></div><div class="big"><span class="dark-background">Repertoar</span></div></div></a></div></div>'),e.put("app/components/repertoar/repertoar-list-item.tmpl.html",'<div class="repertoar-li"><div class="rp-thumbnail" ng-style="{\'background-image\':\'url(\' + show.thumbnail + \')\'}"><a class="rp-location" ng-if="::show.location" ng-href="{{::show.location.gmap}}" target="_blank"><span class="glyphicon glyphicon-map-marker"></span> {{::show.location.name}}</a></div><div class="rp-info"><div class="rp-left"><header><h2>{{::show.title}}</h2><h4>{{::show.theatre}}</h4><p><em>{{::show.genre }}</em></p></header><p><strong>Tekst:</strong> {{::show.screenwrite}}</p><p><strong>Režija:</strong> {{::show.director}}</p></div><div class="rp-right"><div class="rp-calendar" datetime="show.date"></div><div class="rp-more btn btn-primary" ng-click="go(show.id)">Opširnije</div></div></div></div>'),e.put("app/components/repertoar/repertoar.tmpl.html",'<h1><span class="gkm-page-header">Repertoar</span></h1><repertoar-li ng-repeat="show in shows" repertoar-show="show"></repertoar-li>'),e.put("app/components/repertoar/rp-calendar.tmpl.html",'<div class="rp-day">{{::day}}</div><div class="rp-mon">{{::mon}}</div><div class="rp-time">{{::time}}</div>'),e.put("app/components/repertoar/show.tmpl.html",'<div class="show-panel"><div class="show-thumbnail" ng-style="{\'background-image\':\'url(\' + show.thumbnail + \')\'}"><header><h2>{{::show.title}}</h2><h4>{{::show.theatre}}</h4><p><em>Komedija</em></p></header></div><div class="show-content"><div class="show-left"><p><strong>Tekst:</strong> {{::show.screenwrite}}</p><p><strong>Režija:</strong> {{::show.director}}</p><br><h3><span class="show-desc-header">O predstavi</span></h3><br><div id="holder"></div></div><div class="show-right"><div ng-if="show.date" class="rp-calendar" datetime="show.date"></div><a class="show-location" ng-if="::show.location" ng-href="{{::show.location.gmap}}" target="_blank"><div class="glyphicon glyphicon-map-marker"></div><div>Prikaži lokaciju predstave</div></a></div></div></div>'),e.put("app/components/repertoar/small-show.tmpl.html",'<div class="small-show-c" ng-click="go()" ng-style="{\'background-image\':\'url(\' + show.thumbnail + \')\'}"><div class="small-show-title">{{show.title}}</div></div>')}]);